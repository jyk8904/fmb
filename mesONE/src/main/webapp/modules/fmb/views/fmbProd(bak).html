<!-- 
/**  
 * @Class Name : fmbProd.html
 * @Description : fmbProd
 * @Modification Information  
 * @

 * @ ----------  ---------  -------------------------------
 * @ 2017.08.14	 조준연 정유경
 * 

 * css: assets/css/fmb.css
 * controller : fmbProdCtrl.js
 *
 */
 -->
 
<!-- ngview 내부 페이지 -->
<div test-ctrl class='bc-screen' style="margin:0">
<bc-form-header logo='assets/img/system/logo.png' title="반별 생산실적" is-mobile="isMobile" style="display:flex; align-items:center; flex-wrap: wrap;">
</bc-form-header>	
	<!-- ngview 내부 body -->
	<bc-form-body style="color:white;"> 
	<div class="buttonArea">
	<md-button class="md-raised md-default" ng-disabled="currentPage == 0" ng-click="minPage()">Previous</md-button>
	    {{currentPage+1}} / {{totalPage}}
	<md-button class="md-raised md-default" ng-disabled="currentPage >= totalPage-1" ng-click="plusPage()">Next</md-button>

	</div>
		<!-- For Mobile/ For Desktop -->
		<!-- 계산식 확인해보기 -->			
		<div prod-panel-ctrl  is-mobile="isMobile"  ng-switch on="currentPage" class="prodTable colorNested" style="display:flex;  flex-direction:column">
			<div class="row-1" style="display:flex;  flex-direction:row; flex-grow:1.5; text-align:center;">
			  <div class="column" ng-switch-when="0" style="display:flex; flex-direction:column; flex-grow:1.5;" >반명</div>
			  <div class="column" ng-switch-default style="display:flex; flex-direction:column; flex-grow:1.5;" >00{{currentPage*2}}반<br>라인명</div>
			  <div class="leftborder" style="display:flex;  flex-direction:column; flex-grow:5;">
			  	<div class="column" style="flex-grow:1" >{{vm.factList[0].prodDt.substr(4,2)}}월 누적</div>
			  	<div style="display:flex; flex-direction:row; flex-grow:1;" >
			  		<div class="column">계획수량</div>
			  		<div class="column">실적수량</div>
			  		<div class="column">달성률</div>
			  		<div class="column">불량수량</div>
			  		<div class="column">공정PPM</div>
			  	</div>
			  </div>
			  
			  <div class="row-1 leftborder" style="display:flex; flex-direction:column; flex-grow:5;">
			  	<div class="column" style="flex-grow:1" >{{vm.factList[0].prodDt.substr(6,2)}}일</div>
			  	<div style="display:flex;  flex-direction:row; flex-grow:1;" >
			  		<div class="column">계획수량</div>
			  		<div class="column">실적수량</div>
			  		<div class="column">달성률</div>
			  		<div class="column">불량수량</div>
			  		<div class="column">공정PPM</div>
			  	</div>
			  </div>
			</div>		
			<!-- 1페이지일 경우 -->
			<div ng-switch-when="0" ng-repeat="fact in vm.factList |  limitTo:maxSize:currentPage*maxSize" style="display:flex;  flex-direction:row; flex-grow:1; text-align:center;">
				<div class="column " style="display:flex; flex-direction:column; flex-grow:1.5;">{{fact.factId}}</div>
				<div class="column leftborder">{{fact.dgoal+ fact.ngoal}}</div>
				<div class="column">{{fact.dcount+ fact.ncount}}</div>
				<div class="column">{{(fact.dcount+ fact.ncount)/(fact.dgoal+ fact.ngoal)*100|number:0}}%</div><!-- 계산식 확인해보기 -->
				<div class="column">{{fact.defectCount}}</div>
				<div class="column">{{fact.defectCount/(fact.dcount+fact.ncount)*100000|number:0}}</div>
				
				<div class="column leftborder">{{fact.dgoalMon + fact.ngoalMon}}</div>
				<div class="column">{{fact.dcountMon+ fact.ncountMon}}</div>
				<div class="column">{{(fact.dcountMon+ fact.ncountMon)/(fact.dgoalMon + fact.ngoalMon)*100|number:0}}%</div>
				<div class="column">{{fact.defectCountMon}}</div>
				<div class="column" 
				 ng-init="vm.goalttl = vm.goalttl +fact.dgoal + fact.ngoal; 
				 	      vm.countttl = vm.countttl + fact.dcount+ fact.ncount;
				 	      vm.defectttl = vm.defectttl + fact.defectCount;
				 	      vm.ppmttl = vm.ppmttl + fact.ppm;">{{fact.defectCountMon/(fact.dcountMon+fact.ncountMon)*100000|number:0}}</div>
			</div>
			<!-- 1페이지일 경우 끝 -->
			<!-- 2,3,4페이지일 경우 -->
			<div ng-switch-default ng-repeat="line in vm.lineList | filterBy:['factId']: '00'+(currentPage*2)" style="display:flex;  flex-direction:row; flex-grow:1; text-align:center;">
				<div class="column"  style="display:flex; flex-direction:column; flex-grow:1.5;">{{line.lineNm}}</div>
				<div class="column  leftborder">{{line.dgoal + line.ngoal}}</div>
				<div class="column">{{line.dcount+ line.ncount}}</div>
				<div class="column">{{(line.dgoal + line.ngoal)/(line.dcount+ line.ncount)*100|number:0}}%</div>
				<div class="column">{{line.defectCount}}</div>
				<div class="column">{{line.defectCount/(line.dcount+line.ncount)*100|number:0}}</div>
				
				<div class="column  leftborder">{{line.dgoalMon + line.ngoalMon}}</div>
				<div class="column">{{line.dcountMon+ line.ncountMon}}</div>
				<div class="column">{{(line.dcountMon+ line.ncountMon)/(line.dgoalMon + line.ngoalMon)*100|number:0}}%</div>
				<div class="column">{{line.defectCountMon}}</div>
				<div class="column" 
				 ng-init="vm.goalttl = vm.goalttl + line.plan; 
				 	      vm.countttl = vm.countttl + line.prod;
				 	      vm.ratettl= vm.ratettl + line.archive;
				 	      vm.defectttl = vm.defectttl + line.bad;
				 	      vm.ppmttl = vm.ppmttl + line.ppm;">{{line.defectCount/(line.dcount+line.ncount)*100 |number:0}}</div>
			</div>
			<!-- 2,3,4페이지일 경우 끝  -->
	 		<div class="row-1" style="display:flex;  flex-direction:row; flex-grow:1; text-align:center;">
		  		<div class="column" style="display:flex; flex-direction:column; flex-grow:1.5;">합계</div>
		  		<div class="column leftborder">{{vm.goalttl}}</div>
		  		<div class="column">{{vm.countttl}}</div>
		  		<div class="column">{{vm.countttl/ vm.goalttl * 100 | number:0}}%</div>
		  		<div class="column">{{vm.defectttl}}</div>
		  		<div class="column">{{vm.ppmttl}}</div>
		  		
		  		<div class="column  leftborder">{{vm.goalttl}}</div>
		  		<div class="column">{{vm.countttl}}</div>
		  		<div class="column">{{vm.countttl/vm.goalttl*100|number:0}}%</div>
		  		<div class="column">{{vm.defectttl}}</div>
		  		<div class="column">{{vm.defectttl/vm.countttl * 100000|number:0}}</div>
		  	
			</div>  
		</div>
		
		
	
		
		
		
		<!-- For Desktop 아랫줄-->
		<div ng-if="isMobile == false" class="prodTable colorNested" layout="column" style="display:flex;  flex-direction:column">
			<div class="row-1"  style="display:flex;  flex-direction:row; flex-grow:1.5; text-align:center;">
			  <div class="column" style="display:flex; flex-direction:column; flex-grow:1.5;">00{{currentPage*2+1}}반<br>
			  라인명</div>
			  <div  class= "leftborder" style="display:flex;  flex-direction:column; flex-grow:5;">
			  	<div class="column">{{vm.factList[0].prodDt.substr(4,2)}}월 누적</div>
			  	<div style="display:flex;  flex-direction:row; flex-grow:1;" >
			  		<div class="column" >계획수량</div>
			  		<div class="column" >실적수량</div>
			  		<div class="column" >달성률</div>
			  		<div class="column" >불량수량</div>
			  		<div class="column"  >공정PPM</div>
			  	</div>
			  </div>
			  
			  <div class="row-1 leftborder" style="display:flex; flex-direction:column; flex-grow:5;">
			  	<div class="column"  >{{vm.factList[0].prodDt.substr(6,2)}}일</div>
			  	<div style="display:flex;  flex-direction:row; flex-grow:1;" >
			  		<div class="column">계획수량</div>
			  		<div class="column">실적수량</div>
			  		<div class="column">달성률</div>
			  		<div class="column">불량수량</div>
			  		<div class="column">공정PPM</div>
			  	</div>
			  </div>
			</div> 		
			
			
			
		<div ng-repeat="line in vm.lineList |filterBy: ['factId']: '00'+(currentPage*2+1)" style="display:flex;  flex-direction:row; flex-grow:1; text-align:center;">
				<div class="column " style="display:flex; flex-direction:column; flex-grow:1.5;">{{line.lineNm}}</div>
				<div class="column  leftborder">{{line.dgoal + line.ngoal}}</div>
				<div class="column">{{line.dcount+ line.ncount}}</div>
				<div class="column">{{(line.dgoal + line.ngoal)/(line.dcount+ line.ncount)*100|number:0}}%</div>
				<div class="column">{{line.defectCount}}</div>
				<div class="column">{{line.defectCount/(line.dcount+line.ncount)*100|number:0}}</div>
				
				<div class="column leftborder">{{line.dgoalMon + line.ngoalMon}}</div>
				<div class="column">{{line.dcountMon+ line.ncountMon}}</div>
				<div class="column">{{(line.dcountMon+ line.ncountMon)/(line.dgoalMon + line.ngoalMon)*100|number:0}}%</div>
				<div class="column">{{line.defectCountMon}}</div>
				<div class="column" 
				 ng-init="vm.goalttl = vm.goalttl + line.plan; 
				 	      vm.countttl = vm.countttl + line.prod;
				 	      vm.ratettl= vm.ratettl + line.archive;
				 	      vm.defectttl = vm.defectttl + line.bad;
				 	      vm.ppmttl = vm.ppmttl + line.ppm;">{{line.defectCount/(line.dcount+line.ncount)*100 |number:0}}</div>
			</div>
			
	 		<div class="row-1" style="display:flex;  flex-direction:row; flex-grow:1; text-align:center;">
		  		<div class="column" style="display:flex; flex-direction:column; flex-grow:1.5;">합계</div>
		  		<div class="column  leftborder">{{vm.goalttl}}</div>
		  		<div class="column">{{vm.countttl}}</div>
		  		<div class="column">{{vm.countttl/ vm.goalttl * 100 | number:0}}%</div>
		  		<div class="column">{{vm.defectttl}}</div>
		  		<div class="column">{{vm.ppmttl}}</div>
		  		
		  		<div class="column  leftborder">{{vm.goalttl}}</div>
		  		<div class="column">{{vm.countttl}}</div>
		  		<div class="column">{{vm.countttl/vm.goalttl*100|number:0}}%</div>
		  		<div class="column">{{vm.defectttl}}</div>
		  		<div class="column">{{vm.defectttl/vm.countttl * 100000|number:0}}</div>
		  	
			</div>  
		</div>
		

	</bc-form-body>
</div>
